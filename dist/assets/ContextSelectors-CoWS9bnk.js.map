{"version":3,"file":"ContextSelectors-CoWS9bnk.js","sources":["../../src/lessons/05-state/ContextSelectors.tsx"],"sourcesContent":["import { createContext, useContext, useState, useRef, useCallback, useSyncExternalStore, useEffect, memo, useMemo } from 'react'\n\n// Simple context selector implementation\nfunction createContextSelector<T>() {\n  const Context = createContext<T | null>(null)\n\n  function Provider({ value, children }: { value: T; children: React.ReactNode }) {\n    const storeRef = useRef(value)\n    const subscribersRef = useRef(new Set<() => void>())\n\n    storeRef.current = value\n\n    const subscribe = useCallback((callback: () => void) => {\n      subscribersRef.current.add(callback)\n      return () => subscribersRef.current.delete(callback)\n    }, [])\n\n    useEffect(() => {\n      subscribersRef.current.forEach((callback) => callback())\n    }, [value])\n\n    const getSnapshot = useCallback(() => storeRef.current, [])\n\n    const contextValue = useMemo(() => ({ subscribe, getSnapshot }), [subscribe, getSnapshot])\n\n    return (\n      <Context.Provider value={contextValue as any}>\n        {children}\n      </Context.Provider>\n    )\n  }\n\n  function useSelector<S>(selector: (state: T) => S): S {\n    const context = useContext(Context)\n    if (!context) throw new Error('useSelector must be within Provider')\n\n    return useSyncExternalStore(\n      (context as any).subscribe,\n      () => selector((context as any).getSnapshot())\n    )\n  }\n\n  return { Provider, useSelector }\n}\n\nexport default function ContextSelectors() {\n  return (\n    <div>\n      <h1>Context Selectors</h1>\n      <p>\n        Learn how to optimize Context performance by selecting only the data you need. Prevent\n        unnecessary re-renders with context selectors!\n      </p>\n\n      {/* Section 1: The Problem */}\n      <section style={{ marginBottom: 'var(--space-8)' }}>\n        <h2>The Problem with Context</h2>\n        <p>\n          When any part of context changes, ALL consumers re-render, even if they don't use the\n          changed value.\n        </p>\n\n        <div\n          style={{\n            background: 'var(--color-error)',\n            color: 'white',\n            padding: 'var(--space-4)',\n            borderRadius: 'var(--radius-lg)',\n            marginTop: 'var(--space-4)',\n          }}\n        >\n          <h3 style={{ color: 'white', marginBottom: 'var(--space-3)' }}>‚ùå Problem:</h3>\n          <pre style={{ background: 'transparent' }}>\n            <code style={{ color: 'white' }}>{`const state = { user, theme, settings };\n\n// Component only uses theme\nfunction Component() {\n  const { theme } = useContext(AppContext);\n  return <div className={theme}>...</div>;\n}\n\n// But re-renders when user or settings change!`}</code>\n          </pre>\n        </div>\n\n        <div\n          style={{\n            background: 'var(--bg-secondary)',\n            padding: 'var(--space-6)',\n            borderRadius: 'var(--radius-lg)',\n            marginTop: 'var(--space-4)',\n            border: '2px solid var(--color-error)'\n          }}\n        >\n          <h3 style={{ marginBottom: 'var(--space-4)', color: 'var(--color-error)' }}>Interactive Problem Demo</h3>\n          <StandardContextDemo />\n        </div>\n      </section>\n\n      {/* Section 2: Solution - Selectors */}\n      <section style={{ marginBottom: 'var(--space-8)' }}>\n        <h2>Solution: Context Selectors</h2>\n        <p>\n          Selectors let you subscribe to only the part of context you need.\n        </p>\n\n        <div\n          style={{\n            background: 'var(--color-success)',\n            color: 'white',\n            padding: 'var(--space-4)',\n            borderRadius: 'var(--radius-lg)',\n            marginTop: 'var(--space-4)',\n          }}\n        >\n          <h3 style={{ color: 'white', marginBottom: 'var(--space-3)' }}>‚úÖ Solution:</h3>\n          <pre style={{ background: 'transparent' }}>\n            <code style={{ color: 'white' }}>{`// Only re-renders when theme changes!\nfunction Component() {\n  const theme = useSelector(state => state.theme);\n  return <div className={theme}>...</div>;\n}`}</code>\n          </pre>\n        </div>\n      </section>\n\n      {/* Section 3: Implementation */}\n      <section style={{ marginBottom: 'var(--space-8)' }}>\n        <h2>Implementation with useSyncExternalStore</h2>\n        <p>\n          React 18+ provides <code>useSyncExternalStore</code> for building selectors.\n        </p>\n\n        <pre style={{ background: 'transparent' }}>\n          <code>{`function useContextSelector(context, selector) {\n  const value = useContext(context);\n  \n  return useSyncExternalStore(\n    value.subscribe, // React subscribes to changes\n    () => selector(value.getSnapshot()) // Selects only the data needed\n  );\n}`}</code>\n        </pre>\n\n        <h3 style={{ marginTop: 'var(--space-6)', marginBottom: 'var(--space-3)' }}>\n          ‚öôÔ∏è How it Works:\n        </h3>\n        <p>\n          We rely on <code>useSyncExternalStore</code> which is designed for subscribing to external state.\n        </p>\n\n        <h4 style={{ marginTop: 'var(--space-4)' }}>1. The Store (Provider)</h4>\n        <pre style={{ background: 'transparent' }}>\n          <code>{`// We store the state in a ref so updating it doesn't trigger a Provider re-render\nconst storeRef = useRef(value);\nconst subscribers = useRef(new Set());\n\n// When value changes, we notify subscribers manually\nuseEffect(() => {\n  subscribers.current.forEach(callback => callback());\n}, [value]);`}</code>\n        </pre>\n\n        <h4 style={{ marginTop: 'var(--space-4)' }}>2. The Selector Hook</h4>\n        <pre style={{ background: 'transparent' }}>\n          <code>{`// Component subscribes ONLY to the result of the selector\nuseSyncExternalStore(\n  subscribe, // Function to register a listener\n  () => selector(storeRef.current) // Snapshots the slice of state\n);\n\n// React only re-renders if the *result* of selector(storeRef.current) changes!`}</code>\n        </pre>\n      </section>\n\n      {/* Section 4: Demo */}\n      <section style={{ marginBottom: 'var(--space-8)' }}>\n        <h2>Interactive Demo</h2>\n\n        <div\n          style={{\n            background: 'var(--bg-secondary)',\n            padding: 'var(--space-6)',\n            borderRadius: 'var(--radius-lg)',\n            marginTop: 'var(--space-4)',\n            border: '2px solid var(--color-success)'\n          }}\n        >\n          <h3 style={{ marginBottom: 'var(--space-4)', color: 'var(--color-success)' }}>Interactive Solution Demo</h3>\n          <AppDemo />\n        </div>\n      </section>\n\n      {/* Section 5: Libraries */}\n      <section style={{ marginBottom: 'var(--space-8)' }}>\n        <h2>Context Selector Libraries</h2>\n\n        <div\n          style={{\n            background: 'var(--color-info)',\n            color: 'white',\n            padding: 'var(--space-4)',\n            borderRadius: 'var(--radius-lg)',\n            marginTop: 'var(--space-4)',\n          }}\n        >\n          <h3 style={{ color: 'white', marginBottom: 'var(--space-3)' }}>üí° Popular Libraries:</h3>\n          <ul style={{ paddingLeft: 'var(--space-6)' }}>\n            <li style={{ color: 'white', marginBottom: 'var(--space-2)' }}>\n              <strong>use-context-selector</strong> - Lightweight selector hook\n            </li>\n            <li style={{ color: 'white', marginBottom: 'var(--space-2)' }}>\n              <strong>zustand</strong> - Modern state management with selectors\n            </li>\n            <li style={{ color: 'white', marginBottom: 'var(--space-2)' }}>\n              <strong>jotai</strong> - Atomic state management\n            </li>\n            <li style={{ color: 'white' }}>\n              <strong>valtio</strong> - Proxy-based state\n            </li>\n          </ul>\n        </div>\n      </section>\n\n      {/* Key Takeaways */}\n      <section>\n        <h2>Key Takeaways</h2>\n        <ul>\n          <li>Context re-renders all consumers on any change</li>\n          <li>Selectors subscribe to specific parts of state</li>\n          <li>\n            Use <code>useSyncExternalStore</code> for custom selectors\n          </li>\n          <li>Libraries like use-context-selector simplify this</li>\n          <li>Great for large context objects</li>\n          <li>Consider state management libraries for complex apps</li>\n        </ul>\n      </section>\n    </div>\n  )\n}\n\n// --- Standard Context (The Problem) ---\nconst StandardContext = createContext<AppState | null>(null)\n\nfunction StandardContextDemo() {\n  const [state, setState] = useState<AppState>({\n    count: 0,\n    user: 'John',\n    theme: 'light',\n  })\n\n  return (\n    <StandardContext.Provider value={state}>\n      <div>\n        <div style={{ display: 'flex', gap: 'var(--space-2)', marginBottom: 'var(--space-4)', flexWrap: 'wrap' }}>\n          <button\n            onClick={() => setState((s) => ({ ...s, count: s.count + 1 }))}\n            style={{\n              padding: 'var(--space-2) var(--space-4)',\n              background: 'var(--color-error)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 'var(--radius-md)',\n              cursor: 'pointer',\n            }}\n          >\n            Increment Count\n          </button>\n          <button\n            onClick={() => setState((s) => ({ ...s, user: s.user === 'John' ? 'Jane' : 'John' }))}\n            style={{\n              padding: 'var(--space-2) var(--space-4)',\n              background: 'var(--color-error)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 'var(--radius-md)',\n              cursor: 'pointer',\n            }}\n          >\n            Toggle User\n          </button>\n          <button\n            onClick={() => setState((s) => ({ ...s, theme: s.theme === 'light' ? 'dark' : 'light' }))}\n            style={{\n              padding: 'var(--space-2) var(--space-4)',\n              background: 'var(--color-error)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 'var(--radius-md)',\n              cursor: 'pointer',\n            }}\n          >\n            Toggle Theme\n          </button>\n        </div>\n\n        <div style={{ display: 'grid', gap: 'var(--space-3)' }}>\n          <ProblemCountDisplay />\n          <ProblemUserDisplay />\n          <ProblemThemeDisplay />\n        </div>\n        <p style={{ color: 'var(--color-error)', fontSize: 'var(--font-size-sm)', marginTop: 'var(--space-4)' }}>\n          ‚ö†Ô∏è Notice: Clicking ANY button re-renders ALL components below!\n        </p>\n      </div>\n    </StandardContext.Provider>\n  )\n}\n\nfunction ProblemCountDisplay() {\n  const context = useContext(StandardContext)\n  if (!context) throw new Error('Missing Provider')\n\n  const renderCountRef = useRef(0)\n  renderCountRef.current += 1\n\n  return (\n    <div style={{ padding: 'var(--space-3)', background: 'var(--color-error-100)', borderRadius: 'var(--radius-md)' }}>\n      <p><strong>Count:</strong> {context.count}</p>\n      <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--text-tertiary)' }}>Renders: {renderCountRef.current}</p>\n    </div>\n  )\n}\n\nfunction ProblemUserDisplay() {\n  const context = useContext(StandardContext)\n  if (!context) throw new Error('Missing Provider')\n\n  const renderCountRef = useRef(0)\n  renderCountRef.current += 1\n\n  return (\n    <div style={{ padding: 'var(--space-3)', background: 'var(--color-error-100)', borderRadius: 'var(--radius-md)' }}>\n      <p><strong>User:</strong> {context.user}</p>\n      <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--text-tertiary)' }}>Renders: {renderCountRef.current}</p>\n    </div>\n  )\n}\n\nfunction ProblemThemeDisplay() {\n  const context = useContext(StandardContext)\n  if (!context) throw new Error('Missing Provider')\n\n  const renderCountRef = useRef(0)\n  renderCountRef.current += 1\n\n  return (\n    <div style={{ padding: 'var(--space-3)', background: 'var(--color-error-100)', borderRadius: 'var(--radius-md)' }}>\n      <p><strong>Theme:</strong> {context.theme}</p>\n      <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--text-tertiary)' }}>Renders: {renderCountRef.current}</p>\n    </div>\n  )\n}\n\n\n// --- Context Selectors (The Solution) ---\n\n// Demo\n\ninterface AppState {\n  count: number\n  user: string\n  theme: string\n}\n\nconst { Provider: AppProvider, useSelector } = createContextSelector<AppState>()\n\nfunction AppDemo() {\n  const [state, setState] = useState<AppState>({\n    count: 0,\n    user: 'John',\n    theme: 'light',\n  })\n\n  return (\n    <AppProvider value={state}>\n      <div>\n        <div style={{ display: 'flex', gap: 'var(--space-2)', marginBottom: 'var(--space-4)', flexWrap: 'wrap' }}>\n          <button\n            onClick={() => setState((s) => ({ ...s, count: s.count + 1 }))}\n            style={{\n              padding: 'var(--space-2) var(--space-4)',\n              background: 'var(--color-primary-500)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 'var(--radius-md)',\n              cursor: 'pointer',\n            }}\n          >\n            Increment Count\n          </button>\n          <button\n            onClick={() => setState((s) => ({ ...s, user: s.user === 'John' ? 'Jane' : 'John' }))}\n            style={{\n              padding: 'var(--space-2) var(--space-4)',\n              background: 'var(--color-accent-500)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 'var(--radius-md)',\n              cursor: 'pointer',\n            }}\n          >\n            Toggle User\n          </button>\n          <button\n            onClick={() => setState((s) => ({ ...s, theme: s.theme === 'light' ? 'dark' : 'light' }))}\n            style={{\n              padding: 'var(--space-2) var(--space-4)',\n              background: 'var(--color-success)',\n              color: 'white',\n              border: 'none',\n              borderRadius: 'var(--radius-md)',\n              cursor: 'pointer',\n            }}\n          >\n            Toggle Theme\n          </button>\n        </div>\n\n        <div style={{ display: 'grid', gap: 'var(--space-3)' }}>\n          <CountDisplay />\n          <UserDisplay />\n          <ThemeDisplay />\n        </div>\n\n        <p style={{ color: 'var(--text-tertiary)', fontSize: 'var(--font-size-sm)', marginTop: 'var(--space-4)' }}>\n          Check console: Each component only re-renders when its selected value changes!\n        </p>\n      </div>\n    </AppProvider>\n  )\n}\n\nconst CountDisplay = memo(function CountDisplay() {\n  const count = useSelector((state) => state.count)\n  const renderCountRef = useRef(0)\n  renderCountRef.current += 1\n  console.log('CountDisplay rendered')\n\n  return (\n    <div\n      style={{\n        padding: 'var(--space-3)',\n        background: 'var(--color-primary-100)',\n        borderRadius: 'var(--radius-md)',\n      }}\n    >\n      <p>\n        <strong>Count:</strong> {count}\n      </p>\n      <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--text-tertiary)' }}>\n        Renders: {renderCountRef.current}\n      </p>\n    </div>\n  )\n})\n\nconst UserDisplay = memo(function UserDisplay() {\n  const user = useSelector((state) => state.user)\n  const renderCountRef = useRef(0)\n  renderCountRef.current += 1\n  console.log('UserDisplay rendered')\n\n  return (\n    <div\n      style={{\n        padding: 'var(--space-3)',\n        background: 'var(--color-accent-100)',\n        borderRadius: 'var(--radius-md)',\n      }}\n    >\n      <p>\n        <strong>User:</strong> {user}\n      </p>\n      <p style={{ fontSize: 'var(--font-size-sm)', color: 'var(--text-tertiary)' }}>\n        Renders: {renderCountRef.current}\n      </p>\n    </div>\n  )\n})\n\nconst ThemeDisplay = memo(function ThemeDisplay() {\n  const theme = useSelector((state) => state.theme)\n  const renderCountRef = useRef(0)\n  renderCountRef.current += 1\n  console.log('ThemeDisplay rendered')\n\n  return (\n    <div\n      style={{\n        padding: 'var(--space-3)',\n        background: 'var(--color-success)',\n        color: 'white',\n        borderRadius: 'var(--radius-md)',\n      }}\n    >\n      <p style={{ color: 'white' }}>\n        <strong>Theme:</strong> {theme}\n      </p>\n      <p style={{ fontSize: 'var(--font-size-sm)', color: 'white' }}>Renders: {renderCountRef.current}</p>\n    </div>\n  )\n})\n"],"names":["createContextSelector","Context","createContext","Provider","value","children","storeRef","useRef","subscribersRef","subscribe","useCallback","callback","useEffect","getSnapshot","contextValue","useMemo","useSelector","selector","context","useContext","useSyncExternalStore","ContextSelectors","jsx","jsxs","StandardContextDemo","AppDemo","StandardContext","state","setState","useState","s","ProblemCountDisplay","ProblemUserDisplay","ProblemThemeDisplay","renderCountRef","AppProvider","CountDisplay","UserDisplay","ThemeDisplay","memo","count","user","theme"],"mappings":"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"}